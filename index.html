<!doctype html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CosMiKi ‚Äì –ó–∞–∫–ª—é—á–µ–Ω–Ω—è –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∞</title>

    <!-- 1) Global styles -->
    <link rel="stylesheet" href="./styles.css">

    <!-- 2) Global constants and helpers (loaded before any feature modules) -->
    <script src="./constants.js"></script>
    <script src="./utils.js"></script>

    <!-- 3) Feature modules that rely on constants/utils and expose globals via window.* -->
    <script src="./conclusion.js"></script>
    <script src="./calendar.js"></script>

    <!-- 4) Main entry script (should be loaded last) -->
    <script src="./main.js"></script>
</head>
<body>

<div class="form-container">
    <form id="consultation-form" class="styled-form">

        <!-- –û—Å–Ω–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ -->
        <fieldset class="form-fieldset">
            <legend class="form-legend">–ó–∞–∫–ª—é—á–µ–Ω–Ω—è –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∞</legend>
            <label class="form-label">
                –Ü–º'—è –∫–ª—ñ—î–Ω—Ç–∞:
                <input type="text" name="client_name" class="form-input" required maxlength="80" value="–ê–ª—ñ–Ω–∞">
            </label>
            <label class="form-label">
                –°–∫–∞—Ä–≥–∏ –∫–ª—ñ—î–Ω—Ç–∞:
                <textarea name="client_complaints" class="form-textarea" rows="4" required maxlength="150">–ó–∞–ø–∞–ª—å–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –ø–æ—Å—Ç–∞–∫–Ω–µ, —á–æ—Ä–Ω—ñ —Ü—è—Ç–∫–∏, –∂–∏—Ä–Ω—ñ—Å—Ç—å
                </textarea>
            </label>
            <label class="form-label">
                –°—Ç–∞–Ω —à–∫—ñ—Ä–∏:
                <textarea name="skin_status" class="form-textarea" rows="4" placeholder="–û–ø–∏—à—ñ—Ç—å —Å—Ç–∞–Ω —à–∫—ñ—Ä–∏" required
                          maxlength="150">–ü–∞–ø—É–ª–æ-–ø—É—Å—Ç—É–ª—å–æ–∑–Ω–∞ —Ñ–æ—Ä–º–∞ –∞–∫–Ω–µ –ª–µ–≥–∫–æ–≥–æ —Å—Ç—É–ø–µ–Ω—é
                </textarea>
            </label>
            <label class="form-label">
                –¢–∞–∫—Ç–∏–∫–∞ –ø—ñ–¥—Ö–æ–¥—É:
                <textarea name="tactics" class="form-textarea" rows="4" placeholder="–û–ø–∏—à—ñ—Ç—å —Ç–∞–∫—Ç–∏–∫—É –ø—ñ–¥—Ö–æ–¥—É" required
                          maxlength="150">–õ—ñ–∫—É–≤–∞—Ç–∏ —à–∫—ñ—Ä—É
                </textarea>
            </label>
        </fieldset>

        <!-- –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ -->
        <fieldset class="form-fieldset">
            <legend class="form-legend">–¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞</legend>
            <label class="form-label">
                –©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑ —Ç–≤–æ—î—é —à–∫—ñ—Ä–æ—é:
                <textarea name="skin_condition" class="form-textarea" rows="4" required maxlength="150">–ê–∫–Ω–µ - —Ö—Ä–æ–Ω—ñ—á–Ω–µ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è —à–∫—ñ—Ä–∏, —è–∫–µ –≤–∏–Ω–∏–∫–∞—î –≤–Ω–∞—Å–ª—ñ–¥–æ–∫ –∑–∞–ø–∞–ª–µ–Ω–Ω—è —Å–∞–ª—å–Ω–æ—ó –∑–∞–ª–æ–∑–∏ —á–µ—Ä–µ–∑ –ø–µ–≤–Ω—ñ —Ñ–∞–∫—Ç–æ—Ä–∏.
                </textarea>
            </label>
            <label class="form-label">
                –ß–æ–º—É –≤–∏–Ω–∏–∫ —Ü–µ–π —Å—Ç–∞–Ω —à–∫—ñ—Ä–∏:
                <textarea name="skin_condition_cause" class="form-textarea" rows="4" required maxlength="150">–§–∞–∫—Ç–æ—Ä–∏ —Ç–∞ —Ç—Ä–∏–≥–µ—Ä–∏, —è–∫—ñ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ —Å—Ç–∞–Ω —à–∫—ñ—Ä–∏:
- –≥–µ–Ω–µ—Ç–∏—á–Ω–∞ —Å—Ö–∏–ª—å–Ω—ñ—Å—Ç—å;
- —Ö—Ä–æ–Ω—ñ—á–Ω–∏–π —Å—Ç—Ä–µ—Å.
                </textarea>
            </label>
        </fieldset>

        <!-- –ü—ñ–¥—Ö—ñ–¥ –¥–æ —à–∫—ñ—Ä–∏ -->
        <fieldset class="form-fieldset">
            <legend class="form-legend">–ü—ñ–¥—Ö—ñ–¥ –¥–æ —à–∫—ñ—Ä–∏</legend>
            <label class="form-label">
                –û–ø–∏—Å —Ç–æ–≥–æ, —è–∫ –±—É–¥–µ–º–æ –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ —Å–∏—Ç—É–∞—Ü—ñ—é:
                <textarea name="solution_description" class="form-textarea" rows="4" required>–ü–µ—Ä—à–∏–º –¥—ñ–ª–æ–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∏–±—Ä–∞—Ç–∏ –∑–∞–ø–∞–ª–µ–Ω–Ω—è –∑ —Å–µ—Ä–µ–¥–∏–Ω–∏ —à–∫—ñ—Ä–∏.
                </textarea>
            </label>
            <label class="form-label">
                –û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–∞ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –ª—ñ–∫—É–≤–∞–Ω–Ω—è:
                <textarea name="treatment_duration" class="form-textarea" rows="4" required>–¢–∞–∫ —è–∫ –∑–∞–ø–∞–ª–µ–Ω–Ω—è –π–¥–µ –∑ –≥–ª–∏–±–æ–∫–∏—Ö —à–∞—Ä—ñ–≤ —à–∫—ñ—Ä–∏, –ª—ñ–∫—É–≤–∞–Ω–Ω—è –∞–∫–Ω–µ —Ç—Ä–∏–≤–∞—î –≤—ñ–¥ 6-—Ç–∏ –º—ñ—Å—è—Ü—ñ–≤ –¥–æ —Ä–æ–∫—É.
                </textarea>
            </label>
        </fieldset>

        <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –ø–æ –¥–æ–≥–ª—è–¥—É -->
        <fieldset class="form-fieldset">
            <legend class="form-legend">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –ø–æ –¥–æ–≥–ª—è–¥—É</legend>
            <div id="products-scroll-container">
                <div id="products-blocks" class="products-container">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                </div>
            </div>
            <button type="button" id="add-products-block" class="form-button">–î–æ–¥–∞—Ç–∏ –±–ª–æ–∫ –∑ —Ç–æ–≤–∞—Ä–∞–º–∏</button>
        </fieldset>

        <!--  –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –ø–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö -->
        <fieldset class="form-fieldset">
            <legend class="form-legend">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –ø–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö</legend>
            <label class="form-label">
                –ü—Ä–æ—Ü–µ–¥—É—Ä–∏, —è–∫—ñ –¥–æ–ø–æ–º–æ–∂—É—Ç—å —à–≤–∏–¥—à–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
                <textarea name="procedure_recommendations" class="form-textarea" rows="4" required>- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ 1

- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ 2

- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ 3
                </textarea>
            </label>
        </fieldset>

        <!-- –î–µ–π—Å—Ç–≤–∏—è -->
        <div class="form-actions">
            <label for="filename-input" class="form-label">–Ü–º'—è —Ñ–∞–π–ª—É:</label>
            <input id="filename-input" type="text" name="filename" class="form-input" value=""
                   placeholder="–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º"/>
            <!--            <button type="button" id="preview-pdf" class="form-button" onclick="previewPDF()">–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥</button>-->
            <button type="button" id="download-pdf" class="form-button" onclick="downloadPDF()">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
        </div>

        <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä –¥–æ–≥–ª—è–¥—É (preview) -->
        <fieldset class="form-fieldset" style="margin-top: 50px;">
            <legend class="form-legend">–ö–∞–ª–µ–Ω–¥–∞—Ä –¥–æ–≥–ª—è–¥—É</legend>

            <div class="calendar-top-row">
                <div class="date-field" id="calendar-date-field">
                    <label class="date-label" for="calendar-start-date">–î–∞—Ç–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó (—Å—Ç–∞—Ä—Ç):</label>
                    <div class="date-pill">
                        <input type="date" id="calendar-start-date" class="date-pill-input">
                        <button type="button" class="date-pill-icon" id="calendar-start-date-btn"
                                aria-label="–í–∏–±—Ä–∞—Ç–∏ –¥–∞—Ç—É">üìÖ
                        </button>
                    </div>
                </div>

                <button type="button" class="form-button" id="calendar-add-consultation">
                    –î–æ–¥–∞—Ç–∏ –∑—É—Å—Ç—Ä—ñ—á (—Å—å–æ–≥–æ–¥–Ω—ñ)
                </button>
            </div>

            <div class="calendar-actions-row">
                <button type="button" class="form-button form-button-primary" id="calendar-download-pdf">
                    –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä (PDF)
                </button>
            </div>

            <div id="calendar-preview-container"></div>

            <!-- Calendar event editor -->
            <div class="calendar-editor">
                <h3 class="calendar-subtitle">–ü–æ–¥—ñ—ó</h3>

                <div class="calendar-event-form">
                    <label class="form-label">
                        –¢–∏–ø –ø–æ–¥—ñ—ó:
                        <select id="cal-ev-type" class="form-input"></select>
                    </label>

                    <label class="form-label">
                        –†–µ–∂–∏–º:
                        <select id="cal-ev-kind" class="form-input">
                            <option value="single">–†–∞–∑–æ–≤–æ (–æ–¥–Ω–∞ –¥–∞—Ç–∞)</option>
                            <option value="range">–ü–µ—Ä—ñ–æ–¥ (–≤—ñ–¥-–¥–æ)</option>
                            <option value="repeat">–ü–æ–≤—Ç–æ—Ä (–∫–æ–∂–Ω—ñ N –¥–Ω—ñ–≤)</option>
                        </select>
                    </label>

                    <div id="cal-ev-kind-single" class="calendar-kind-panel">
                        <label class="form-label">
                            –î–∞—Ç–∞:
                            <div class="date-pill">
                                <input type="date" id="cal-ev-date" class="date-pill-input"/>
                                <button type="button" class="date-pill-icon" id="cal-ev-date-btn"
                                        aria-label="–í–∏–±—Ä–∞—Ç–∏ –¥–∞—Ç—É">üìÖ
                                </button>
                            </div>
                        </label>
                    </div>

                    <div id="cal-ev-kind-range" class="calendar-kind-panel" style="display:none;">
                        <label class="form-label">
                            –í—ñ–¥:
                            <div class="date-pill">
                                <input type="date" id="cal-ev-start" class="date-pill-input"/>
                                <button type="button" class="date-pill-icon" id="cal-ev-start-btn"
                                        aria-label="–í–∏–±—Ä–∞—Ç–∏ –¥–∞—Ç—É">üìÖ
                                </button>
                            </div>
                        </label>
                        <label class="form-label">
                            –î–æ:
                            <div class="date-pill">
                                <input type="date" id="cal-ev-end" class="date-pill-input"/>
                                <button type="button" class="date-pill-icon" id="cal-ev-end-btn"
                                        aria-label="–í–∏–±—Ä–∞—Ç–∏ –¥–∞—Ç—É">üìÖ
                                </button>
                            </div>
                        </label>

                    </div>

                    <div id="cal-ev-kind-repeat" class="calendar-kind-panel" style="display:none;">
                        <label class="form-label">
                            –ü–æ—á–∞—Ç–æ–∫:
                            <div class="date-pill">
                                <input type="date" id="cal-ev-repeat-start" class="date-pill-input"/>
                                <button type="button" class="date-pill-icon" id="cal-ev-repeat-start-btn"
                                        aria-label="–û–±—Ä–∞—Ç–∏ –¥–∞—Ç—É">üìÖ
                                </button>
                            </div>
                        </label>
                        <label class="form-label">
                            –ö—ñ–Ω–µ—Ü—å:
                            <div class="date-pill">
                                <input type="date" id="cal-ev-repeat-end" class="date-pill-input"/>
                                <button type="button" class="date-pill-icon" id="cal-ev-repeat-end-btn"
                                        aria-label="–û–±—Ä–∞—Ç–∏ –¥–∞—Ç—É">üìÖ
                                </button>
                            </div>
                        </label>

                        <label class="form-label">
                            –Ü–Ω—Ç–µ—Ä–≤–∞–ª/—á–∞—Å—Ç–æ—Ç–∞ (–¥–Ω—ñ–≤):
                            <div class="pill-input">
                                <input type="number"
                                       id="cal-ev-interval"
                                       class="pill-input-field"
                                       min="1"
                                       step="1"
                                       inputmode="numeric"
                                       value="2"/>
                                <span class="pill-input-addon">–¥–Ω—ñ–≤</span>
                            </div>
                        </label>

                    </div>

                    <label class="form-label">
                        –ö–æ–ª—ñ—Ä:
                        <select id="cal-ev-color" class="form-input"></select>
                    </label>

                    <label class="form-label" style="grid-column: 1 / -1;">
                        –ü–æ–¥—ñ—ó (–º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏):
                        <textarea id="cal-ev-legend" class="form-textarea" rows="3"></textarea>
                    </label>

                    <div class="calendar-event-actions">
                        <button type="button" class="form-button" id="cal-ev-add">–î–æ–¥–∞—Ç–∏ –ø–æ–¥—ñ—é</button>
                        <button type="button" class="form-button" id="cal-ev-clear">–û—á–∏—Å—Ç–∏—Ç–∏ –ø–æ–ª—è</button>
                    </div>
                </div>

                <div class="calendar-events-list">
                    <h4 class="calendar-subtitle" style="margin-top:18px;">–°–ø–∏—Å–æ–∫ –ø–æ–¥—ñ–π</h4>
                    <div id="calendar-events-container"></div>
                </div>
            </div>
        </fieldset>
    </form>
</div>
</body>
</html>
